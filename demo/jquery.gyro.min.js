(function(a){a.fn.gyroOn=function(b){return this.each(function(){var j=a(window);var d=null;var e={};var g=false;var i=0;var g=window.orientation?true:false;function h(l,k){if(true===e.invert){l=-l;k=-k;}if("horizontal"==e.direction){l=0;}else{if("vertical"==e.direction){k=0;}}d.css({top:l,left:k});}function c(o){if(!o||!o.originalEvent||!o.originalEvent.rotationRate){a(window).unbind("devicemotion",c);return;}var l=(o.originalEvent.rotationRate.beta);var p=(o.originalEvent.rotationRate.alpha);console.log(g?"yes":"no");if(g){var k=l;l=p;p=k;}var n=(p*i);var m=-(l*2*i);h(n,m);}function f(n){var k={top:j.height()>>1,left:j.width()>>1};var m=(k.top-n.clientY)*e.distance/j.height();var l=(k.left-n.clientX)*e.distance/j.width();h(m,l);}d=a(this);e=a.extend({distance:50,speed:1000,direction:"both",position:"relative",top:0,left:0,mouse:true,invert:false},b);i=e.distance*(navigator.userAgent.match(/(iPod|iPhone|iPad)/i)?0.1:2);if("fixed"!==e.position&&"absolute"!==e.position){e.position="relative";}d.css({position:e.position,top:e.top,left:e.left,"transition-property":"top, left","transition-duration":e.speed+"ms","transition-delay":0});j.on("devicemotion",c);if(true===e.mouse){j.on("mousemove",f);}j.on("orientationchange",function(k){g=window.orientation?true:false;});});};})(jQuery);